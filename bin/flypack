#!/bin/bash

set -e

echo "Fly Container Package."
echo "------------------------------------------------"
echo "Application: $APPLICATION"
echo "Description: $DESCRIPTION"
echo "Version: $VERSION"
echo "Revision: $REVISION"
echo "Repository: $REPOSITORY"
echo "Branch: $BRANCH"
echo "Commit: $COMMIT"
echo "Build: $BUILD"
echo "------------------------------------------------"
echo "Config:"
for FILE in /conf/*; do
  echo "    - $FILE";
done
echo "------------------------------------------------"
if [ $# -eq 0 ]; then
  echo "Component:"
  cd /hook
  for FILE in *; do
    echo "    * $FILE";
  done
else
  cd /pack/$1
  /hook/$1/$2 ${@:3}
fi
